<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boarding House App</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="security.js"></script>
    <script src="receipt.js"></script>
</head>
<body>

    <section id="login-screen" class="active-screen">
        <div class="login-card">
            <h1>Welcome Home</h1>
            <p>Tenant Portal</p>
            <form id="login-form">
                <div class="form-group">
                    <label>Room Number</label>
                    <input type="text" id="login-room" placeholder="e.g. 101" required>
                </div>
                <div class="form-group">
                    <label>PIN Code</label>
                    <input type="password" id="login-pin" placeholder="****" required>
                </div>
                <button type="submit" class="btn-primary full-width">Login</button>
                <div id="login-error" class="error-msg"></div>
            </form>
                <div style="margin-top: 2rem; border-top: 1px solid #eee; padding-top: 1rem;">
                 <a href="admin.html" style="color: #ccc; text-decoration: none; font-size: 0.8rem;">
                 ğŸ”’ Admin Access
            </a>
            </div>
        </div>
    </section>

    <div id="app-container" class="hidden">
        
        <!-- Sidebar Navigation -->
        <div class="tenant-sidebar">
            <div class="sidebar-header">
                <h2>ğŸ  BHouse</h2>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-label">MAIN</div>
                <a href="#" onclick="app.nav('home'); return false;" class="nav-link active" data-view="home">
                    <span class="nav-icon">ğŸ </span> Dashboard
                </a>
                <a href="#" onclick="app.nav('announcements'); return false;" class="nav-link" data-view="announcements">
                    <span class="nav-icon">ğŸ“¢</span> Announcements
                </a>
                <a href="#" onclick="app.nav('tickets'); return false;" class="nav-link" data-view="tickets">
                    <span class="nav-icon">ğŸ«</span> Tickets
                </a>
                <a href="#" onclick="app.nav('billing'); return false;" class="nav-link" data-view="billing">
                    <span class="nav-icon">ğŸ’°</span> Billing
                </a>
                
                <div class="nav-label" style="margin-top: 1.5rem;">MORE</div>
                <a href="#" onclick="app.nav('notifications'); return false;" class="nav-link" data-view="notifications">
                    <span class="nav-icon">ğŸ””</span> Notifications
                    <span id="notification-badge" class="notification-badge hidden">0</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button onclick="app.logout()" class="btn-logout full-width">Logout</button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="tenant-content">
            <div class="tenant-header">
                <h2 id="tenant-page-title">Dashboard</h2>
                <button id="tenant-theme-toggle" class="btn-secondary theme-toggle" onclick="app.toggleTheme()">Light Mode</button>
            </div>
            
            <button id="back-btn" class="btn-back-main hidden" onclick="app.back()">
                <span class="back-icon">â†</span>
                <span>Back</span>
            </button>
            
            <section id="home-view" class="view-section">
                <h2>Dashboard</h2>
                <div class="home-grid">
                    <div class="home-main">
                        <div class="card highlight-card">
                            <h3>ğŸ“¢ Latest Announcements</h3>
                            <div id="home-announcements-list" class="list-container">
                                <p class="loading-text">Loading...</p>
                            </div>
                            <button class="btn-text" onclick="app.nav('announcements')">View All</button>
                        </div>
                    </div>

                    <div class="home-sidebar">
                        <div class="card highlight-card">
                            <h3>âš¡ Latest Bill</h3>
                            <div id="home-soa-summary">
                                <p class="loading-text">Checking...</p>
                            </div>
                            <button class="btn-secondary full-width" onclick="app.nav('billing')">View Details</button>
                        </div>

                        <div class="card quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-grid">
                                <button class="btn-primary full-width" onclick="app.nav('tickets')">ğŸ« Report Issue</button>
                                <button class="btn-secondary full-width" onclick="app.nav('billing')">ğŸ“Š View History</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="announcements-view" class="view-section hidden">
                <h2>Announcements</h2>
                <div id="all-announcements-list" class="card-grid">
                    </div>
            </section>

            <section id="tickets-view" class="view-section hidden">
                <h2>Support Tickets</h2>
                
                <div class="card form-card">
                    <h3>Submit New Ticket</h3>
                    <form id="ticket-form">
                        <div class="form-group">
                            <label>Category</label>
                            <select id="ticket-category">
                                <option value="maintenance">Maintenance</option>
                                <option value="wifi">Internet/WiFi</option>
                                <option value="billing">Billing Inquiry</option>
                                <option value="noise">Noise Complaint</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Message</label>
                            <textarea id="ticket-message" rows="3" placeholder="Describe your issue..." required></textarea>
                        </div>
                        <button type="submit" class="btn-primary">Submit Ticket</button>
                    </form>
                </div>

                <h3 class="mt-large">My Ticket History</h3>
                <div id="tickets-list" class="card-grid">
                    </div>
            </section>

            <section id="billing-view" class="view-section hidden">
                <h2>Billing Statements</h2>
                <div class="billing-grid">
                    <div class="card">
                        <h3>ğŸ’³ Payment Method</h3>
                        <div id="payment-method" class="payment-method">
                            <div class="payment-method-brand">GCash</div>
                            <div class="payment-method-details">
                                <div><strong>Account Name:</strong> Janet Regidor</div>
                                <div><strong>Account No:</strong> 0966-5700-206</div>
                                <div><strong>Note:</strong> Use your Surname as reference.</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>ğŸ“… Payment Schedule</h3>
                        <div id="payment-schedule" class="schedule-list">
                            <p class="loading-text">Loading schedule...</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <h3>ğŸ§¾ Billing History</h3>
                    <div id="billing-list" class="card-grid"></div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <h3>â¬‡ï¸ Payment Receipts</h3>
                    <div id="receipts-list" class="receipts-list">
                        <p class="loading-text">Loading receipts...</p>
                    </div>
                </div>
            </section>

            <section id="notifications-view" class="view-section hidden">
                <h2>ğŸ”” Notifications</h2>
                
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                        <button id="filter-all" class="btn-secondary active" onclick="app.filterNotifications('all')" style="flex: 1;">All</button>
                        <button id="filter-bills" class="btn-secondary" onclick="app.filterNotifications('bill')" style="flex: 1;">ğŸ’° Bills</button>
                        <button id="filter-announcements" class="btn-secondary" onclick="app.filterNotifications('announcement')" style="flex: 1;">ğŸ“¢ Announcements</button>
                    </div>
                    <button onclick="app.clearAllNotifications()" class="btn-text" style="font-size: 0.75rem; color: #858796;">Clear All</button>
                </div>

                <div id="notifications-list" class="notifications-container">
                    <p class="loading-text">Loading notifications...</p>
                </div>
            </section>
        </div>

        <nav class="mobile-nav">
            <button class="nav-item" onclick="app.nav('home')">
                <span class="icon">ğŸ </span>
                <span class="label">Home</span>
            </button>
            <button class="nav-item" onclick="app.nav('announcements')">
                <span class="icon">ğŸ“¢</span>
                <span class="label">News</span>
            </button>
            <button class="nav-item" onclick="app.nav('tickets')">
                <span class="icon">ğŸ«</span>
                <span class="label">Tickets</span>
            </button>
            <button class="nav-item" onclick="app.nav('billing')">
                <span class="icon">ğŸ’°</span>
                <span class="label">Billing</span>
            </button>
            <button class="nav-item" onclick="app.nav('notifications')" style="position: relative;">
                <span class="icon">ğŸ””</span>
                <span class="label">Alerts</span>
                <span id="mobile-notification-badge" class="notification-badge hidden" style="position: absolute; top: -5px; right: 5px;">0</span>
            </button>
        </nav>
    </div>

    <footer class="site-footer">
        <div class="max-container footer-content">
            <span>Â© 2026 Chinoxdadz. All rights reserved.</span>
            <div class="footer-links">
                <a href="terms.html">Terms</a>
                <a href="LICENSE">License</a>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>